# 深入了解 React 状态管理

前言：React 状态管理库目前层出不穷，让人眼花撩乱。

本教程尝试揭开它们的层层迷雾，理解它们之间的联系与区别，帮助读者找到最适合自己的状态管理库。

## 本文要介绍的状态管理库

- Redux
- Mobx
- Recoil
- Jotai
- rxjs

## 例子启动方式

使用 parcel 启动例子，例如：

```bash
yarn parcel examples/001-vanilla-react/demo-01/index.html
```

## 使用场景

笔者会先确定状态管理一般的使用场景，然后用这些状态管理库一一实现这些使用场景，再从代码中了解它们的特点以及区别。

另外，笔者会分别使用 hooks 写法和 class 写法分别实现这些使用场景。

### 1、组件间数据共享

- 兄弟组件
- 祖子组件

### 2、对状态树的处理

- 深层级的状态依然可以命中

### 3、组件更新粒度，非必要，不render

- useMemo, memo

### 4、更新方式

- 是否可以在组件外更新

## 其他库对比

- 与 vue2 vuex 对比
- 与 vue3 对比

## 状态管理理念介绍

### 为什么有状态管理？

问：后端就没有状态管理，为什么前端需要？

答：对细粒度页面细粒度更新的控制

### 为什么 React 的状态管理库这么多？

问：vue 中，一个 vuex 就能搞定。 angular 中甚至没有专门的状态管理库，用 service 就能搞定。为什么偏偏 react 能整出这么多状态管理库？

答：react 是个视图层的库，渲染页面的时机（setState）由开发者自己把控。vue 和 angular 会相对“聪明”一点，会自动地帮助用户渲染视图。

todo:

- 动手再试一下 angular 的 service
- 动手再试一下 vue 的 vuex
